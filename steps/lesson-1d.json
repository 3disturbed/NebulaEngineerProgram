{
    "id": "lesson-1d",
    "title": "Lesson 1d: Market Configuration",
    "steps": [
        {
            "title": "What is Configuration?",
            "content": "<p>Configuration = <strong>magic numbers</strong> that drive your entire economy.</p><div class=\"info-box\"><strong>These numbers determine:</strong><br>â€¢ Can price go up 15% per hour?<br>â€¢ How much do NPCs buy/sell for?<br>â€¢ When is supply \"scarce\"?<br>â€¢ What are commodity prices?</div><p style=\"margin-top: 15px;\"><strong>Bad:</strong> Hardcoded numbers scattered everywhere (15% WHERE?!)</p><p><strong>Good:</strong> One config file with comments explaining WHY</p>"
        },
        {
            "title": "Create market.config.js",
            "content": "<p>Create <strong>src\\config\\market.config.js</strong>:</p><div class=\"code-block\"><code class=\"language-javascript\">// src/config/market.config.js\n// ============================\n// Market Configuration - The Numbers That Control Your Game's Economy\n// \n// WARNING: CHANGING THESE VALUES WILL AFFECT YOUR ENTIRE ECONOMY!\n// All market behavior is controlled by these magic numbers.\n\nmodule.exports = {\n  // How often to update prices (in seconds)\n  updateIntervalSeconds: 3600,  // 3600 sec = 60 min = 1 hour\n  \n  // NPC Federation pricing (intentionally unfair!)\n  federationBuyMarkup: 0.10,    // Players get 10% of market price\n  federationSellMarkup: 10.0,   // NPCs charge 10x markup\n  \n  // Price change limits (prevent economic crashes)\n  maxPriceIncreasePerHour: 0.15,  // Max +15% per hour\n  maxPriceDecreasePerHour: 0.10,  // Max -10% per hour\n  \n  // Supply/demand thresholds\n  highDemandThreshold: 100,      // >100 trades = high volume\n  lowSupplyThreshold: 50000,     // <50k units = SCARCE\n  highSupplyThreshold: 200000,   // >200k units = ABUNDANT\n  \n  // Base prices for commodities\n  basePrices: {\n    iron_ore: 50,\n    copper_ore: 75,\n    uranium_ore: 500,\n    titanium_ore: 150,\n    silicon: 100\n  },\n  \n  // Display names for commodities\n  commodityNames: {\n    iron_ore: 'Iron Ore',\n    copper_ore: 'Copper Ore',\n    uranium_ore: 'Uranium Ore',\n    titanium_ore: 'Titanium Ore',\n    silicon: 'Silicon'\n  }\n};</code></div>"
        },
        {
            "title": "Understanding Federation",
            "content": "<p><strong>The Federation are the bad guys of space!</strong></p><div class=\"info-box\">If iron market price = 200 credits:<br><br><strong>They PAY you:</strong> 200 Ã— 0.10 = 20 credits (OUCH!)<br><br><strong>They CHARGE you:</strong> 200 Ã— 10.0 = 2000 credits (YIKES!)</div><p style=\"margin-top: 15px;\"><strong>Why?</strong> To force players to trade with EACH OTHER, not NPCs. This creates a healthy player-run economy!</p>"
        },
        {
            "title": "Understanding Price Limits",
            "content": "<p><strong>WITHOUT limits:</strong></p><div class=\"code-block\">Hour 1: 100 â†’ 500 (economy implodes!)\nHour 2: Everyone quits (game dies)</div><p style=\"margin-top: 15px;\"><strong>WITH 15% cap:</strong></p><div class=\"code-block\">Hour 1: 100 â†’ 115 (capped)\nHour 2: 115 â†’ 132 (capped)\nHour 3: 132 â†’ 152 (capped)\nHour 4: 152 â†’ 175 (capped)\nHour 5: 175 â†’ 201 (doubled in 5 hours)</div><p style=\"margin-top: 15px;\">Players have TIME to react! ðŸŽ¯</p>"
        },
        {
            "title": "Create test-config.js",
            "content": "<p>Create <strong>test-config.js</strong> in the root:</p><div class=\"code-block\"><code class=\"language-javascript\">// test-config.js\n// ================\n// Test market configuration loading and values\n\nconst config = require('./src/config/market.config');\n\nconsole.log('=== Market Configuration Test ===\\n');\n\n// Test 1: Check update interval\nconst minutesPerUpdate = config.updateIntervalSeconds / 60;\nconsole.log('Update interval:', config.updateIntervalSeconds, 'seconds');\nconsole.log('              = ', minutesPerUpdate, 'minutes per update');\n\n// Test 2: Check Federation markups\nconsole.log('\\nFederation Pricing:');\nconsole.log('  Buy markup: ', config.federationBuyMarkup, '(players get 10% of value)');\nconsole.log('  Sell markup:', config.federationSellMarkup, '(NPCs charge 10x markup)');\n\n// Test 3: Check price limits\nconsole.log('\\nPrice Limits:');\nconsole.log('  Max increase: ', (config.maxPriceIncreasePerHour * 100) + '%');\nconsole.log('  Max decrease: ', (config.maxPriceDecreasePerHour * 100) + '%');\n\n// Test 4: Check supply/demand thresholds\nconsole.log('\\nSupply/Demand Thresholds:');\nconsole.log('  High demand: ', config.highDemandThreshold, 'trades');\nconsole.log('  Low supply: ', config.lowSupplyThreshold, 'units');\nconsole.log('  High supply:', config.highSupplyThreshold, 'units');\n\n// Test 5: Check base prices\nconsole.log('\\nBase Prices:');\nObject.entries(config.basePrices).forEach(([key, price]) => {\n  const name = config.commodityNames[key];\n  console.log('  ' + name + ':', price, 'credits');\n});\n\nconsole.log('\\nConfiguration loaded successfully!');</code></div><div class=\"read-more\" style=\"margin-top: 15px; font-size: 0.9em;\"><strong>Read more on MDN:</strong><ul style=\"margin-top: 5px;\"><li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\" target=\"_blank\">Object.entries()</a></li><li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\" target=\"_blank\">Array.prototype.forEach()</a></li><li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/console/log\" target=\"_blank\">console.log()</a></li></ul></div><p style=\"margin-top: 15px;\">Run it:</p><div class=\"command\">node test-config.js</div><button class=\"btn btn-lab\" id=\"labBtn-1d-0\" onclick=\"openLab('labBtn-1d-0')\">ðŸ§ª Try the Config Lab</button>"
        },
        {
            "title": "Lesson 1 Complete! ðŸŽ‰",
            "content": "<p style=\"font-size: 1.1em;\"><strong>You've completed the ENTIRE foundation!</strong></p><div style=\"margin: 20px 0;\"><div class=\"achievement\">âœ“ Project Setup</div><div class=\"achievement\">âœ“ TimeService (HSL)</div><div class=\"achievement\">âœ“ Logger Utility</div><div class=\"achievement\">âœ“ Market Config</div></div><p style=\"margin-top: 20px;\"><strong>What you've learned:</strong></p><ul style=\"margin: 10px 0 10px 20px;\"><li>Microservice architecture</li><li>Game time systems (HSL)</li><li>Structured logging</li><li>Configuration management</li></ul><p style=\"margin-top: 20px; color: #667eea; font-weight: bold;\">â†’ Next: Lesson 2 - Database Wrapper</p>"
        }
    ]
}