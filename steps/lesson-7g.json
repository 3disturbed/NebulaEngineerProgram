{
    "id": "lesson-7g",
    "title": "Lesson 7g: Web Dashboard",
    "steps": [
        {
            "title": "Dashboard Layout Design",
            "content": "<p>A complete web dashboard combines multiple views:</p><div class=\"info-box\"><strong>Dashboard sections:</strong><br>â€¢ Header: Player info, currency, level<br>â€¢ Main content: Galaxy map (left), panels (right)<br>â€¢ Price chart: Market data visualization<br>â€¢ Heatmap: Supply/demand analysis<br>â€¢ Navigation: Current location, target<br>â€¢ Inventory: Holdings, assets<br>â€¢ Footer: Game clock, connection status</div><p style=\"margin-top: 15px;\"><strong>Responsive layout:</strong></p><div class=\"code-block\"><code class=\"language-css\">.dashboard {\n    display: grid;\n    grid-template-areas:\n        \"header header\"\n        \"map panels\"\n        \"map panels\"\n        \"footer footer\";\n    grid-template-columns: 2fr 1fr;\n    grid-template-rows: auto 1fr 1fr auto;\n    gap: 16px;\n    height: 100vh;\n}\n\n.dashboard-header { grid-area: header; }\n.dashboard-map { grid-area: map; }\n.dashboard-panels { grid-area: panels; }\n.dashboard-footer { grid-area: footer; }\n</code></div>"
        },
        {
            "title": "WebSocket Data Binding",
            "content": "<p><strong>Real-time data updates from server:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class DashboardDataService {\n    constructor(serverUrl) {\n        this.socket = io(serverUrl);\n        this.marketData = null;\n        this.playerData = null;\n        this.listeners = [];\n    }\n    \n    subscribe(callback) {\n        this.listeners.push(callback);\n    }\n    \n    notifyListeners() {\n        this.listeners.forEach(cb => cb({\n            market: this.marketData,\n            player: this.playerData\n        }));\n    }\n    \n    connect() {\n        // Market price updates\n        this.socket.on('market:prices', (data) => {\n            this.marketData = data;\n            this.notifyListeners();\n        });\n        \n        // Player account updates\n        this.socket.on('player:balance', (data) => {\n            this.playerData = data;\n            this.notifyListeners();\n        });\n        \n        // Market supply/demand\n        this.socket.on('market:heatmap', (data) => {\n            this.marketData.heatmap = data;\n            this.notifyListeners();\n        });\n        \n        // Navigation updates\n        this.socket.on('nav:position', (data) => {\n            this.playerData.position = data;\n            this.notifyListeners();\n        });\n    }\n    \n    requestData(type) {\n        this.socket.emit('data:request', { type });\n    }\n}\n</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\" target=\"_blank\">MDN: WebSocket</a> - Real-time communication</div>"
        },
        {
            "title": "Panel System Architecture",
            "content": "<p><strong>Modular panels that update independently:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class DashboardPanel {\n    constructor(panelId, title) {\n        this.id = panelId;\n        this.title = title;\n        this.container = document.getElementById(panelId);\n        this.visible = true;\n        this.data = null;\n    }\n    \n    render() {\n        throw new Error('render() must be implemented');\n    }\n    \n    update(newData) {\n        this.data = newData;\n        this.render();\n    }\n    \n    toggle() {\n        this.visible = !this.visible;\n        this.container.style.display = this.visible ? 'block' : 'none';\n    }\n}\n\nclass PriceChartPanel extends DashboardPanel {\n    render() {\n        if (!this.data || !this.data.prices) return;\n        \n        const prices = this.data.prices.slice(-24);  // Last 24 hours\n        const canvas = document.createElement('canvas');\n        canvas.width = this.container.offsetWidth - 20;\n        canvas.height = 200;\n        \n        const ctx = canvas.getContext('2d');\n        const chart = new PriceChart(ctx, prices, canvas.width, canvas.height);\n        chart.draw();\n        \n        this.container.innerHTML = `<h3>${this.title}</h3>`;\n        this.container.appendChild(canvas);\n    }\n}\n\nclass HeatmapPanel extends DashboardPanel {\n    render() {\n        if (!this.data || !this.data.heatmap) return;\n        \n        const canvas = document.createElement('canvas');\n        canvas.width = this.container.offsetWidth - 20;\n        canvas.height = 150;\n        \n        const ctx = canvas.getContext('2d');\n        const heatmap = new MarketHeatmap(ctx, this.data.heatmap, canvas.width, canvas.height);\n        heatmap.draw();\n        \n        this.container.innerHTML = `<h3>${this.title}</h3>`;\n        this.container.appendChild(canvas);\n    }\n}\n\nclass NavigationPanel extends DashboardPanel {\n    render() {\n        if (!this.data || !this.data.position) return;\n        \n        const html = `\n            <h3>${this.title}</h3>\n            <div style=\"font-family: monospace; font-size: 13px; line-height: 1.8;\">\n                <div>Position: (${this.data.position.x.toFixed(1)}, ${this.data.position.y.toFixed(1)})</div>\n                <div>Target: ${this.data.target ? `(${this.data.target.x}, ${this.data.target.y})` : 'None'}</div>\n                <div>ETA: ${this.data.eta ? this.data.eta + ' h' : '--'}</div>\n                <div style=\"margin-top: 10px; padding-top: 10px; border-top: 1px solid #333;\">\n                    Status: <span style=\"color: ${this.data.traveling ? '#FFA500' : '#00FF00'};\">${this.data.traveling ? 'TRAVELING' : 'IDLE'}</span>\n                </div>\n            </div>\n        `;\n        \n        this.container.innerHTML = html;\n    }\n}\n</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain\" target=\"_blank\">MDN: Class Inheritance</a> - Extending classes</div>"
        },
        {
            "title": "Complete Dashboard Integration",
            "content": "<p><strong>Bring all components together:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class CompleteDashboard {\n    constructor(config) {\n        this.config = config;\n        this.dataService = new DashboardDataService(config.serverUrl);\n        this.panels = new Map();\n        this.galaxyRenderer = null;\n        \n        this.initPanels();\n        this.setupDataBinding();\n    }\n    \n    initPanels() {\n        // Create all dashboard panels\n        this.panels.set('prices', new PriceChartPanel('pricePanel', 'Market Prices'));\n        this.panels.set('heatmap', new HeatmapPanel('heatmapPanel', 'Supply & Demand'));\n        this.panels.set('nav', new NavigationPanel('navPanel', 'Navigation'));\n        \n        // Add event listeners for panel toggling\n        document.querySelectorAll('[data-toggle-panel]').forEach(btn => {\n            btn.addEventListener('click', (e) => {\n                const panelId = e.target.dataset.togglePanel;\n                const panel = this.panels.get(panelId);\n                if (panel) panel.toggle();\n            });\n        });\n    }\n    \n    setupDataBinding() {\n        // Subscribe to data service\n        this.dataService.subscribe((data) => {\n            // Update all panels\n            this.panels.forEach((panel, key) => {\n                switch(key) {\n                    case 'prices':\n                        panel.update(data.market);\n                        break;\n                    case 'heatmap':\n                        panel.update(data.market);\n                        break;\n                    case 'nav':\n                        panel.update(data.player);\n                        break;\n                }\n            });\n        });\n        \n        // Connect to server\n        this.dataService.connect();\n        \n        // Request initial data\n        this.dataService.requestData('all');\n    }\n    \n    setupMapInteraction(canvasId) {\n        this.galaxyRenderer = new GalaxyRenderer(canvasId);\n        \n        // Map clicks set navigation targets\n        this.galaxyRenderer.canvas.addEventListener('click', (e) => {\n            const rect = this.galaxyRenderer.canvas.getBoundingClientRect();\n            const x = (e.clientX - rect.left - this.galaxyRenderer.canvas.width / 2) / this.galaxyRenderer.zoom + this.galaxyRenderer.cameraX;\n            const y = (e.clientY - rect.top - this.galaxyRenderer.canvas.height / 2) / this.galaxyRenderer.zoom + this.galaxyRenderer.cameraY;\n            \n            // Send navigation target to server\n            this.dataService.socket.emit('nav:setTarget', {\n                x: Math.floor(x),\n                y: Math.floor(y)\n            });\n        });\n    }\n    \n    render() {\n        // Render all panels and map continuously\n        const animate = () => {\n            if (this.galaxyRenderer) {\n                this.galaxyRenderer.render();\n            }\n            requestAnimationFrame(animate);\n        };\n        animate();\n    }\n}\n\n// Usage\nconst dashboard = new CompleteDashboard({\n    serverUrl: 'http://localhost:3000'\n});\ndashboard.setupMapInteraction('galaxyCanvas');\ndashboard.render();</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\" target=\"_blank\">MDN: Map</a> - Store panel references</div>"
        },
        {
            "title": "Lesson 7g Complete! ðŸŽ‰",
            "content": "<p style=\"font-size: 1.1em;\"><strong>You've built a complete web dashboard.</strong></p><div style=\"margin: 20px 0;\"><div class=\"achievement\">âœ“ Responsive grid layout</div><div class=\"achievement\">âœ“ Real-time WebSocket updates</div><div class=\"achievement\">âœ“ Modular panel system</div><div class=\"achievement\">âœ“ Chart and heatmap visualization</div><div class=\"achievement\">âœ“ Interactive galaxy map</div></div><p style=\"margin-top: 20px; color: #667eea; font-weight: bold;\">â†’ Next: Lesson 7h - Complete Game Interface</p>"
        }
    ]
}
