{
    "id": "lesson-7f",
    "title": "Lesson 7f: Navigation Dashboard",
    "steps": [
        {
            "title": "Dashboard Architecture",
            "content": "<p>A complete navigation dashboard shows:</p><div class=\"info-box\"><strong>Main components:</strong><br>â€¢ Galaxy map (large canvas)<br>â€¢ Current position display<br>â€¢ Target selection<br>â€¢ Navigation info (distance, ETA)<br>â€¢ Object list panel<br>â€¢ Status indicators</div><p style=\"margin-top: 15px;\"><strong>Data flow:</strong></p><ol style=\"margin: 10px 0 10px 20px;\"><li>User clicks on sector</li><li>System calculates route</li><li>Calculate distance & travel time</li><li>Display estimated arrival</li><li>Update HUD during travel</li></ol>"
        },
        {
            "title": "Navigation System Implementation",
            "content": "<p><strong>Calculate routes and travel times:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class NavigationSystem {\n    constructor(playerShip) {\n        this.ship = playerShip;\n        this.currentSector = { x: 5, y: 5 };\n        this.targetSector = null;\n        this.route = [];\n        this.distanceToTarget = 0;\n        this.estimatedArrival = 0;\n    }\n    \n    setTarget(targetX, targetY) {\n        this.targetSector = { x: targetX, y: targetY };\n        this.calculateRoute();\n    }\n    \n    calculateRoute() {\n        if (!this.targetSector) return;\n        const dx = this.targetSector.x - this.currentSector.x;\n        const dy = this.targetSector.y - this.currentSector.y;\n        this.distanceToTarget = Math.sqrt(dx * dx + dy * dy);\n        \n        const travelHours = this.distanceToTarget / this.ship.maxSpeed;\n        this.estimatedArrival = travelHours;\n        this.route = this.generateWaypoints(this.currentSector, this.targetSector);\n        \n        return {\n            distance: this.distanceToTarget.toFixed(2),\n            travelTime: travelHours.toFixed(2),\n            status: 'Route calculated'\n        };\n    }\n    \n    generateWaypoints(start, end, steps = 10) {\n        const waypoints = [];\n        for (let i = 0; i <= steps; i++) {\n            const t = i / steps;\n            waypoints.push({\n                x: start.x + (end.x - start.x) * t,\n                y: start.y + (end.y - start.y) * t\n            });\n        }\n        return waypoints;\n    }\n    \n    update(hoursElapsed) {\n        if (!this.targetSector) return false;\n        const travelSpeed = this.ship.maxSpeed;\n        const distanceTraveled = travelSpeed * hoursElapsed;\n        \n        if (distanceTraveled >= this.distanceToTarget) {\n            this.currentSector = this.targetSector;\n            this.targetSector = null;\n            return true;\n        }\n        \n        const progress = distanceTraveled / this.distanceToTarget;\n        const steps = this.route.length - 1;\n        const currentStep = Math.floor(progress * steps);\n        \n        if (currentStep < this.route.length - 1) {\n            const step1 = this.route[currentStep];\n            const step2 = this.route[currentStep + 1];\n            const stepProgress = (progress * steps) - currentStep;\n            \n            this.currentSector = {\n                x: step1.x + (step2.x - step1.x) * stepProgress,\n                y: step1.y + (step2.y - step1.y) * stepProgress\n            };\n        }\n        \n        this.estimatedArrival = Math.max(0, this.estimatedArrival - hoursElapsed);\n        return false;\n    }\n    \n    getNavigationData() {\n        return {\n            position: this.currentSector,\n            target: this.targetSector,\n            distance: this.distanceToTarget.toFixed(2),\n            eta: this.estimatedArrival.toFixed(2)\n        };\n    }\n}\n</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes\" target=\"_blank\">MDN: JavaScript Classes</a> - OOP patterns</div>"
        },
        {
            "title": "Dashboard UI Panel",
            "content": "<p><strong>Display navigation information:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class NavigationDashboard {\n    constructor(containerId, navigationSystem) {\n        this.container = document.getElementById(containerId);\n        this.nav = navigationSystem;\n        this.createUI();\n    }\n    \n    createUI() {\n        this.container.innerHTML = `\n            <div style=\"background: #1a1a2e; color: #fff; padding: 20px; border: 1px solid #667eea; border-radius: 8px;\">\n                <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 20px;\">\n                    <!-- Left Panel: Status -->\n                    <div>\n                        <h3 style=\"color: #667eea; margin: 0 0 15px 0;\">CURRENT POSITION</h3>\n                        <div id=\"positionDisplay\" style=\"font-family: monospace; font-size: 14px; line-height: 1.8;\">\n                            X: <span id=\"posX\">0.00</span><br>\n                            Y: <span id=\"posY\">0.00</span>\n                        </div>\n                        \n                        <h3 style=\"color: #667eea; margin: 20px 0 15px 0;\">TARGET</h3>\n                        <div id=\"targetDisplay\" style=\"font-family: monospace; font-size: 14px; line-height: 1.8;\">\n                            <span id=\"targetText\">None selected</span>\n                        </div>\n                    </div>\n                    \n                    <!-- Right Panel: Navigation Data -->\n                    <div>\n                        <h3 style=\"color: #667eea; margin: 0 0 15px 0;\">NAVIGATION DATA</h3>\n                        <div style=\"font-family: monospace; font-size: 14px; line-height: 1.8;\">\n                            Distance: <span id=\"distDisplay\">--</span> sectors<br>\n                            ETA: <span id=\"etaDisplay\">--</span> hours<br>\n                            Speed: <span id=\"speedDisplay\">--</span> sectors/h<br>\n                            Status: <span id=\"statusDisplay\" style=\"color: #00FF00;\">IDLE</span>\n                        </div>\n                        \n                        <button id=\"engageButton\" style=\"margin-top: 15px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n                            ENGAGE AUTOPILOT\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `;\n        \n        // Setup button\n        document.getElementById('engageButton').addEventListener('click', () => {\n            this.engageAutopilot();\n        });\n    }\n    \n    engageAutopilot() {\n        if (!this.nav.targetSector) {\n            alert('No target selected');\n            return;\n        }\n        // Start traveling\n        this.nav.update(1);  // Simulate 1 hour\n        this.update();\n    }\n    \n    update() {\n        const data = this.nav.getNavigationData();\n        \n        document.getElementById('posX').textContent = data.position.x.toFixed(2);\n        document.getElementById('posY').textContent = data.position.y.toFixed(2);\n        \n        if (data.target) {\n            document.getElementById('targetText').innerHTML = \n                `(${data.target.x}, ${data.target.y})`;\n            document.getElementById('distDisplay').textContent = data.distance;\n            document.getElementById('etaDisplay').textContent = data.eta;\n            document.getElementById('statusDisplay').textContent = 'TRAVELING';\n            document.getElementById('statusDisplay').style.color = '#FFA500';\n        } else {\n            document.getElementById('targetText').innerHTML = 'None selected';\n            document.getElementById('distDisplay').textContent = '--';\n            document.getElementById('etaDisplay').textContent = '--';\n            document.getElementById('statusDisplay').textContent = 'IDLE';\n            document.getElementById('statusDisplay').style.color = '#00FF00';\n        }\n        \n        document.getElementById('speedDisplay').textContent = this.nav.ship.maxSpeed;\n    }\n}\n</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\" target=\"_blank\">MDN: getElementById()</a> - Access HTML elements</div>"
        },
        {
            "title": "Integrated Navigation Map",
            "content": "<p><strong>Combine galaxy map with navigation controls:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class IntegratedNavigationUI {\n    constructor(mapCanvasId, dashboardId) {\n        this.renderer = new GalaxyRenderer(mapCanvasId);\n        this.nav = new NavigationSystem({ maxSpeed: 2 });\n        this.dashboard = new NavigationDashboard(dashboardId, this.nav);\n        \n        // Handle map clicks\n        this.renderer.canvas.addEventListener('click', (e) => {\n            const rect = this.renderer.canvas.getBoundingClientRect();\n            const screenX = e.clientX - rect.left;\n            const screenY = e.clientY - rect.top;\n            \n            const worldX = (screenX - this.renderer.canvas.width / 2) / this.renderer.zoom + this.renderer.cameraX;\n            const worldY = (screenY - this.renderer.canvas.height / 2) / this.renderer.zoom + this.renderer.cameraY;\n            \n            const sectorX = Math.floor(worldX);\n            const sectorY = Math.floor(worldY);\n            \n            this.setTarget(sectorX, sectorY);\n        });\n        \n        this.startAnimation();\n    }\n    \n    setTarget(x, y) {\n        this.nav.setTarget(x, y);\n        this.dashboard.update();\n    }\n    \n    startAnimation() {\n        const animate = () => {\n            // Update navigation\n            const arrived = this.nav.update(0.016);  // ~60 FPS, ~1 minute per frame\n            \n            // Update displays\n            this.dashboard.update();\n            this.renderer.cameraX = this.nav.currentSector.x;\n            this.renderer.cameraY = this.nav.currentSector.y;\n            \n            // Render galaxy\n            this.renderer.render(this.galaxy);\n            \n            if (arrived) {\n                console.log('Arrived at destination!');\n            }\n            \n            requestAnimationFrame(animate);\n        };\n        animate();\n    }\n}\n\n// Usage\nconst ui = new IntegratedNavigationUI('galaxyCanvas', 'dashboard');</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event\" target=\"_blank\">MDN: click Event</a> - Handle user clicks</div>"
        },
        {
            "title": "Lesson 7f Complete! ðŸŽ‰",
            "content": "<p style=\"font-size: 1.1em;\"><strong>You've built a complete navigation dashboard.</strong></p><div style=\"margin: 20px 0;\"><div class=\"achievement\">âœ“ Calculate routes and distances</div><div class=\"achievement\">âœ“ Estimate travel times</div><div class=\"achievement\">âœ“ Display navigation data</div><div class=\"achievement\">âœ“ Handle map interactions</div><div class=\"achievement\">âœ“ Integrate map and UI panels</div></div><p style=\"margin-top: 20px; color: #667eea; font-weight: bold;\">â†’ Next: Lesson 7g - Complete Web Dashboard</p>"
        }
    ]
}
