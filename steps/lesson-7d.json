{
    "id": "lesson-7d",
    "title": "Lesson 7d: 2D Coordinate Systems",
    "steps": [
        {
            "title": "Galaxy Structure",
            "content": "<p>The Nebula Nexus universe is organized into a 2D coordinate grid:</p><div class=\"info-box\"><strong>Sectors = Star Systems</strong><br>Each sector is identified by (x, y) coordinates<br>Example: Sector (5, 3) contains planets, asteroids, stations<br><br><strong>Vectors = Positions</strong><br>Within a sector, things orbit at specific positions<br>A 2D vector marks current position<br>Orbit speed determines rotations per hour</div><p style=\"margin-top: 15px;\"><strong>Why this system?</strong></p><ul style=\"margin: 10px 0 10px 20px;\"><li>Scales to millions of locations</li><li>Easy to calculate distances</li><li>Enables procedural generation</li><li>Supports fast pathfinding</li></ul>"
        },
        {
            "title": "Distance Calculations",
            "content": "<p><strong>Find distance between two locations:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">// Euclidean distance formula\nfunction distance(x1, y1, x2, y2) {\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\n// Example: Player at (5, 3), Target at (8, 7)\nconst dist = distance(5, 3, 8, 7);\nconsole.log('Distance: ' + dist.toFixed(2) + ' units');\n\n// Manhattan distance (grid-based)\nfunction manhattanDistance(x1, y1, x2, y2) {\n    return Math.abs(x2 - x1) + Math.abs(y2 - y1);\n}\n\nconst gridDist = manhattanDistance(5, 3, 8, 7);\nconsole.log('Grid distance: ' + gridDist + ' steps');</code></div><p style=\"margin-top: 15px;\"><strong>Normalize a direction vector:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">// Create a unit vector (length = 1) pointing toward target\nfunction normalizeVector(dx, dy) {\n    const length = Math.sqrt(dx * dx + dy * dy);\n    if (length === 0) return { x: 0, y: 0 };\n    return { x: dx / length, y: dy / length };\n}\n\n// Direction from player to target\nconst playerX = 5, playerY = 3;\nconst targetX = 8, targetY = 7;\nconst direction = normalizeVector(\n    targetX - playerX, \n    targetY - playerY\n);\n\nconsole.log('Direction: (' + direction.x.toFixed(2) + ', ' + direction.y.toFixed(2) + ')');</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sqrt\" target=\"_blank\">MDN: Math.sqrt()</a> - Square root calculations</div>"
        },
        {
            "title": "Orbital Mechanics",
            "content": "<p><strong>Objects orbit around sector centers:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class OrbitalObject {\n    constructor(name, orbitRadius, orbitSpeed) {\n        this.name = name;\n        this.orbitRadius = orbitRadius;  // Distance from center\n        this.orbitSpeed = orbitSpeed;    // Rotations per hour\n        this.angle = Math.random() * Math.PI * 2;  // Random starting angle\n    }\n    \n    // Update position based on elapsed time\n    update(hoursElapsed) {\n        // Increase angle (rotation)\n        this.angle += (this.orbitSpeed * hoursElapsed) * Math.PI * 2;\n        // Keep angle between 0 and 2Ï€\n        this.angle = this.angle % (Math.PI * 2);\n    }\n    \n    // Get current (x, y) position\n    getPosition() {\n        return {\n            x: Math.cos(this.angle) * this.orbitRadius,\n            y: Math.sin(this.angle) * this.orbitRadius\n        };\n    }\n    \n    // Get distance from center\n    getDistanceFromCenter() {\n        return this.orbitRadius;\n    }\n}\n\n// Example: Mars orbiting at 0.1 rotations per hour\nconst mars = new OrbitalObject('Mars', 100, 0.1);\nmars.update(1);  // Simulate 1 hour passing\n\nconst pos = mars.getPosition();\nconsole.log('Mars position: (' + pos.x.toFixed(2) + ', ' + pos.y.toFixed(2) + ')');</code></div><p style=\"margin-top: 15px;\"><strong>Three objects orbiting at different speeds:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">const sector1 = {\n    name: 'Alpha Sector',\n    objects: [\n        new OrbitalObject('Planet A', 50, 0.5),   // Fast\n        new OrbitalObject('Planet B', 100, 0.1),  // Medium\n        new OrbitalObject('Station', 150, 0.01)   // Slow\n    ]\n};\n\n// Simulate 24 hours\nfor (let hour = 0; hour < 24; hour++) {\n    sector1.objects.forEach(obj => {\n        obj.update(1);\n        const pos = obj.getPosition();\n        console.log(`${hour}h: ${obj.name} at (${pos.x.toFixed(0)}, ${pos.y.toFixed(0)})`);\n    });\n}</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cos\" target=\"_blank\">MDN: Math.cos()</a> - Trigonometric functions</div>"
        },
        {
            "title": "Sector & Navigation Data",
            "content": "<p><strong>Structure for game world:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">class Sector {\n    constructor(x, y, name) {\n        this.x = x;\n        this.y = y;\n        this.name = name;\n        this.objects = [];\n        this.routes = [];  // Connections to other sectors\n    }\n    \n    addObject(orbitalObject) {\n        this.objects.push(orbitalObject);\n    }\n    \n    // Get all objects within range\n    getObjectsInRange(centerX, centerY, radius) {\n        return this.objects.filter(obj => {\n            const pos = obj.getPosition();\n            const dist = distance(centerX, centerY, pos.x, pos.y);\n            return dist <= radius;\n        });\n    }\n    \n    // Serialize for network transmission\n    toJSON() {\n        return {\n            x: this.x,\n            y: this.y,\n            name: this.name,\n            objectCount: this.objects.length,\n            objects: this.objects.map(obj => ({\n                name: obj.name,\n                position: obj.getPosition(),\n                distance: obj.getDistanceFromCenter()\n            }))\n        };\n    }\n}\n\n// Build a 10x10 galaxy\nconst galaxy = [];\nfor (let x = 0; x < 10; x++) {\n    for (let y = 0; y < 10; y++) {\n        const sector = new Sector(x, y, `Sector (${x}, ${y})`);\n        \n        // Add random objects to each sector\n        for (let i = 0; i < Math.floor(Math.random() * 5); i++) {\n            sector.addObject(\n                new OrbitalObject(\n                    'Object ' + i,\n                    50 + Math.random() * 200,\n                    Math.random() * 0.5\n                )\n            );\n        }\n        \n        galaxy.push(sector);\n    }\n}\n\nconsole.log('Galaxy has ' + galaxy.length + ' sectors');</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\">MDN: Array.filter()</a> - Filter objects by criteria</div>"
        },
        {
            "title": "Lesson 7d Complete! ðŸŽ‰",
            "content": "<p style=\"font-size: 1.1em;\"><strong>You understand the game world's coordinate system.</strong></p><div style=\"margin: 20px 0;\"><div class=\"achievement\">âœ“ Use 2D coordinates for locations</div><div class=\"achievement\">âœ“ Calculate distances between points</div><div class=\"achievement\">âœ“ Implement orbital mechanics</div><div class=\"achievement\">âœ“ Normalize direction vectors</div><div class=\"achievement\">âœ“ Organize sectors and objects</div></div><p style=\"margin-top: 20px; color: #667eea; font-weight: bold;\">â†’ Next: Lesson 7e - Galaxy Rendering</p>"
        }
    ]
}
