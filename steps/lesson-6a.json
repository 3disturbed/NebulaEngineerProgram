{
    "id": "lesson-6a",
    "title": "Lesson 6a: Building a REST API",
    "steps": [
        {
            "title": "What is a REST API?",
            "content": "<p>Our market-service.js works great, but it only runs locally. To share market data with other services or clients, we need a <strong>REST API</strong> (Representational State Transfer).</p><p style=\"margin-top: 15px;\"><strong>REST API = HTTP endpoints that return JSON data</strong></p><div class=\"info-box\"><strong>Four HTTP Methods:</strong><br><code>GET</code> - Retrieve data (read-only)<br><code>POST</code> - Create new data<br><code>PUT</code> - Update existing data<br><code>DELETE</code> - Remove data</div><p style=\"margin-top: 15px;\"><strong>Our Market API will:</strong></p><ul style=\"margin: 10px 0 10px 20px;\"><li>GET /api/market/prices - Get current prices</li><li>GET /api/market/item/:name - Get single item details</li><li>GET /api/market/history - Get price history</li></ul>"
        },
        {
            "title": "Express.js Basics",
            "content": "<p><strong>Express</strong> is the easiest way to build REST APIs in Node.js. Install it first:</p><div class=\"code-block\"><code class=\"language-bash\">npm install express</code></div><p style=\"margin-top: 15px;\"><strong>Basic Express server structure:</strong></p><div class=\"code-block\"><code class=\"language-javascript\">const express = require('express');\nconst app = express();\n\n// Middleware\napp.use(express.json());\n\n// Route: GET /api/market/prices\napp.get('/api/market/prices', (req, res) => {\n    // Return current prices\n    res.json({ prices: items });\n});\n\n// Start server on port 3000\napp.listen(3000, () => {\n    console.log('ðŸš€ API Server running on http://localhost:3000');\n});</code></div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\" target=\"_blank\">MDN: HTTP GET</a> - Safe request method for reading data</div>"
        },
        {
            "title": "The Market Prices Endpoint",
            "content": "<p>Create an endpoint that returns current market prices:</p><div class=\"code-block\"><code class=\"language-javascript\">// Market data from our service\nconst items = [\n    { name: 'Iron Ore', price: 100, supply: 50, demand: 80 },\n    { name: 'Copper Ore', price: 75, supply: 60, demand: 60 },\n    { name: 'Uranium Ore', price: 500, supply: 20, demand: 2 }\n];\n\nconst analyzer = new MarketAnalyzer();\n\n// GET /api/market/prices - Returns all current prices\napp.get('/api/market/prices', (req, res) => {\n    analyzer.analyzePrices(items);\n    \n    const response = {\n        timestamp: new Date().toISOString(),\n        items: items.map(item => ({\n            name: item.name,\n            price: parseFloat(item.price.toFixed(2)),\n            supply: item.supply,\n            demand: item.demand,\n            demandRatio: analyzer.getDemandRatio(item.name)\n        }))\n    };\n    \n    res.json(response);\n});</code></div><div class=\"hint\"><strong>Test with curl:</strong><br><code>curl http://localhost:3000/api/market/prices</code><br><br>Returns JSON with all prices and demand ratios</div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response/json\" target=\"_blank\">MDN: Response.json()</a> - Send JSON response</div>"
        },
        {
            "title": "Getting Individual Items",
            "content": "<p>Create an endpoint to get details for a specific item:</p><div class=\"code-block\"><code class=\"language-javascript\">// GET /api/market/item/:name - Get single item\napp.get('/api/market/item/:name', (req, res) => {\n    const itemName = req.params.name;\n    analyzer.analyzePrices(items);\n    \n    const item = items.find(i => i.name === itemName);\n    \n    if (!item) {\n        return res.status(404).json({\n            error: 'Item not found',\n            requested: itemName\n        });\n    }\n    \n    res.json({\n        name: item.name,\n        price: parseFloat(item.price.toFixed(2)),\n        supply: item.supply,\n        demand: item.demand,\n        demandRatio: analyzer.getDemandRatio(item.name),\n        priceStatus: item.price > 100 ? 'expensive' : 'cheap'\n    });\n});</code></div><div class=\"hint\"><strong>Test with curl:</strong><br><code>curl http://localhost:3000/api/market/item/Iron%20Ore</code><br><br><strong>Error handling:</strong><br>Returns 404 status if item doesn't exist</div><div class=\"read-more\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\" target=\"_blank\">MDN: HTTP 404 Not Found</a> - Resource doesn't exist</div>"
        },
        {
            "title": "Lesson 6a Complete! ðŸŽ‰",
            "content": "<p style=\"font-size: 1.1em;\"><strong>You've built the foundation of a REST API.</strong></p><div style=\"margin: 20px 0;\"><div class=\"achievement\">âœ“ Understand REST API basics</div><div class=\"achievement\">âœ“ Learn Express.js framework</div><div class=\"achievement\">âœ“ Create GET endpoints</div><div class=\"achievement\">âœ“ Handle URL parameters</div><div class=\"achievement\">âœ“ Return proper HTTP status codes</div></div><p style=\"margin-top: 20px; color: #667eea; font-weight: bold;\">â†’ Next: Lesson 6b - Adding History & Advanced Endpoints</p>"
        }
    ]
}
